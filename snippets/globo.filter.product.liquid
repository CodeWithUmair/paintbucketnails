{% comment %}Do not edit this file{% endcomment %}
{% comment %}
  See documentation here: https://globosoftware.net/kb/customize-product-list-template-2/
{% endcomment %}

{% raw %}
  {% assign root_url = {% endraw %}"{%- if routes.root_url != "/" -%}{{ routes.root_url }}{%- endif -%}"{% raw %} %}
  {% assign currencyFormat = {% endraw %}{{ shop.money_format | json }}{% raw %} %}
  {% assign swatch_options = '' | downcase | replace: ', ', ',' | split: ","  %}
  {% assign image_options  = '' | downcase | replace: ', ', ',' | split: ","  %}
  {% assign text_options   = 'Size' | downcase | replace: ', ', ',' | split: ","  %}
  {% assign show_selected_variant_info = true %}

  {% assign image_size     = '360x504' %}
  {% assign images_count   = product.images | size %}
  {% assign variants_count = product.variants | size %}
  {% assign options_count  = product.options | size %}
  {% assign no_image = 'https://cdn.shopify.com/s/images/themes/product-1.png' %}

  {% assign featured_image            = product.featured_image %}
  {% assign product_price             = product.price %}
  {% assign product_compare_at_price  = product.compare_at_price %}
  {% assign second_image_index        = 2 %}
  {% assign selected_or_first_available_variant = product.selected_or_first_available_variant %}

  {% if show_selected_variant_info and product.selected_variant %}
    {% assign selected_or_first_available_variant = product.selected_variant %}
    {% assign product_price             = selected_or_first_available_variant.price %}
    {% assign product_compare_at_price  = selected_or_first_available_variant.compare_at_price %}
    {% if selected_or_first_available_variant.image %}
      {% assign featured_image  = selected_or_first_available_variant.image %}
    {% endif %}
    {% for image in product.images %}
      {% if image.id == featured_image.id %}
        {% if forloop.index == images_count %}
          {% assign second_image_index = 1 %}
        {% else %}
          {% assign second_image_index = forloop.index | plus: 1 %}
        {% endif %}
      {% endif %}
    {% endfor %}
  {% endif %}

            <div{% if showPageData %} data-page="{{page}}"{% endif %} class="spf-col-xl-4 spf-col-lg-4 spf-col-md-6 spf-col-sm-6 spf-col-6">
        <div class="product-thumbnail spf-product-card spf-product-card__left spf-product-card__template-5{% unless product.available %} spf-soldout{% endunless %}">
          <div class="spf-product-card__inner">

            {% comment %}
            {% if product_compare_at_price > product_price %}
              <span translatable class="spf-product__label spf-product__label-sale sale-text">
                {{translation.product.sale | default: "Sale"}}
              </span>
            {% endif %}
            {% endcomment %}

            <a class="image-wrap spf-product-card__image-wrapper{% if images_count > 1 %} hover-effect{% endif %}" href="{{root_url}}{{ product.url | within: collection }}" style="padding-top:140%;">

              {% if product.available != true %}
                <div class="sold-out-overlay h6">
                  <span>
                    <span class="text-wrap">
                      {{translation.product.sold_out | default: "Sold out"}}
                    </span>
                  </span>
                </div>
              {% endif %}

              {% if product.tags contains 'bestseller' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="73" height="73" viewBox="0 0 73 73" class="icon-bestseller">
                    <g fill="none" fill-rule="evenodd">
                        <g>
                            <g transform="translate(-1221 -125) rotate(21 280.617 3413.301)">
                                <circle cx="27.5" cy="27.5" r="27.5" fill="#202020" stroke="#231F20"/>
                                <path fill="#FFF" fill-rule="nonzero" d="M18.854 22.773c1.079 0 1.927-.716 1.927-1.706 0-.813-.68-1.29-1.149-1.44.416-.195.973-.725.973-1.406 0-.928-.814-1.635-1.865-1.635h-2.025c-.097 0-.168.08-.168.168v5.851c0 .089.071.168.168.168h2.14zm-.22-3.588h-.946v-1.547h.945c.451 0 .76.31.76.751 0 .442-.309.796-.76.796zm.123 2.545h-1.07v-1.573h.964c.46 0 .902.327.902.769 0 .46-.354.804-.796.804zm8.336 1.043c.097 0 .168-.08.168-.168v-.724c0-.089-.071-.168-.168-.168h-2.617v-1.547h2.184c.088 0 .167-.071.167-.168v-.734c0-.088-.08-.168-.167-.168h-2.184v-1.45h2.617c.097 0 .168-.079.168-.167v-.725c0-.089-.071-.168-.168-.168h-3.598c-.097 0-.168.08-.168.168v5.851c0 .089.07.168.168.168h3.598zm4.384.089c1.246 0 2.033-.84 2.033-1.75 0-1.14-.99-1.653-1.847-1.998-.716-.292-1.043-.575-1.043-.99 0-.283.274-.619.777-.619.487 0 1.158.442 1.229.486.106.071.239 0 .31-.106l.335-.504c.062-.088.036-.238-.053-.291-.177-.133-.866-.593-1.768-.593-1.405 0-1.988.91-1.988 1.698 0 1.043.83 1.573 1.661 1.909.743.3 1.123.61 1.123 1.06 0 .38-.345.681-.804.681-.575 0-1.291-.521-1.335-.548-.08-.062-.23-.062-.3.062l-.319.548c-.08.142-.035.186.044.265.177.168.831.69 1.945.69zm6.311-.089c.089 0 .168-.08.168-.168v-4.958h1.353c.097 0 .167-.08.167-.168v-.725c0-.089-.07-.168-.167-.168h-3.863c-.097 0-.168.08-.168.168v.725c0 .088.07.168.168.168h1.352v4.958c0 .089.08.168.168.168h.822zM11.783 34.647c1.246 0 2.033-.84 2.033-1.75 0-1.14-.99-1.653-1.847-1.997-.716-.292-1.043-.575-1.043-.99 0-.283.274-.62.777-.62.487 0 1.158.443 1.23.487.105.07.238 0 .308-.106l.336-.504c.062-.088.036-.239-.053-.292-.176-.132-.866-.592-1.768-.592-1.405 0-1.988.91-1.988 1.697 0 1.043.83 1.574 1.661 1.91.743.3 1.123.61 1.123 1.06 0 .38-.345.68-.804.68-.575 0-1.29-.52-1.335-.547-.08-.062-.23-.062-.3.062l-.319.548c-.08.141-.035.185.044.265.177.168.831.69 1.945.69zm8.256-.088c.097 0 .168-.08.168-.168v-.725c0-.088-.07-.168-.168-.168h-2.617v-1.547h2.184c.088 0 .168-.07.168-.167v-.734c0-.089-.08-.168-.168-.168h-2.184v-1.45h2.617c.097 0 .168-.08.168-.168v-.725c0-.088-.07-.167-.168-.167H16.44c-.097 0-.168.08-.168.167v5.852c0 .088.071.168.168.168h3.598zm6.16 0c.098 0 .169-.08.169-.168v-.725c0-.088-.07-.168-.168-.168h-2.254V28.54c0-.088-.08-.167-.168-.167h-.813c-.098 0-.168.08-.168.167v5.852c0 .088.07.168.168.168H26.2zm5.79 0c.098 0 .169-.08.169-.168v-.725c0-.088-.071-.168-.168-.168h-2.254V28.54c0-.088-.08-.167-.168-.167h-.814c-.097 0-.168.08-.168.167v5.852c0 .088.071.168.168.168h3.236zm6.153 0c.097 0 .168-.08.168-.168v-.725c0-.088-.071-.168-.168-.168h-2.617v-1.547h2.184c.088 0 .168-.07.168-.167v-.734c0-.089-.08-.168-.168-.168h-2.184v-1.45h2.617c.097 0 .168-.08.168-.168v-.725c0-.088-.071-.167-.168-.167h-3.598c-.097 0-.168.08-.168.167v5.852c0 .088.07.168.168.168h3.598zm3.739 0c.088 0 .168-.08.168-.168v-2.254h.98l1.177 2.342c.017.036.061.08.14.08h.93c.15 0 .211-.141.15-.256l-1.212-2.245c.77-.31 1.309-.973 1.309-1.786 0-1.052-.867-1.9-1.927-1.9h-2.528c-.098 0-.168.08-.168.167v5.852c0 .088.07.168.168.168h.813zm1.617-3.368h-1.44v-1.759h1.44c.469 0 .875.39.875.858 0 .495-.406.901-.875.901z"/>
                            </g>
                        </g>
                    </g>
                </svg>
              {% endif %}

              {% if images_count > 0 %}
                {% for image in product.images %}
                  <img
                    data-variants="{% if image.variant_ids %}{{image.variant_ids | join: ','}}{% endif %}"
                    class="gflazyload spf-product-card__image spf-product-card__image-{% if featured_image.id == image.id %}main{% elsif forloop.index == second_image_index %}secondary{% else %}hidden{% endif %}"
                    srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                    src="{{image.src | img_url: image_size}}"
                    data-src="{{image.src | img_lazyload_url}}"
                    data-sizes="auto"
                    data-aspectratio="{{image.aspect_ratio}}"
                    data-parent-fit="contain"
                    alt="{{image.alt | escape}}"
                    />
                {% endfor %}
              {% else %}
              <img data-variants="" class="gflazyload spf-product-card__image spf-product-card__image-main" src="{{no_image}}" alt="{{product.title | escape}}">
              {% endif %}
            </a>
                      </div>

          <div class="">

            <h2 class="product-title"><a translatable href="{{root_url}}{{ product.url | within: collection }}">{{product.title}}</a></h2>

            <p class="money">
              {% if product_compare_at_price > product_price %}
                <span class="sale-price">
                  {% if product.price_varies %}
                    {%- assign sale_price = product.price | money -%}
                    {{ 'products.product.on_sale_from_html' | t: price: sale_price }}
                  {% else %}
                    <span class="visually-hidden">{{ 'products.product.on_sale' | t }}</span>
                    {{ product_price | money }}
                  {% endif %}
                </span>
              {% else %}

                <span class="price">
                  {% if product.price_varies %}
                    {%- assign price = product_price | money -%}
                    {{ 'products.product.from_text_html' | t: price: price }}
                  {% else %}
                    {{ product_price | money }}
                  {% endif %}
                </span>
              {% endif %}

              {% if product_compare_at_price > product_price %}
                <span class="visually-hidden">{{ 'products.product.regular_price' | t }}</span>
                <s>{{ product_compare_at_price | money }}</s>
              {% endif %}
            </p>

            {% comment %}

            <p class="spf-product-card__price-wrapper money">

            {% if product_compare_at_price > product_price %}
            <s class="spf-product-card__oldprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_compare_at_price | money }}</s>
            <p class="spf-product-card__saleprice sale-price {% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</p>
            {% else %}
            <p class="spf-product-card__price{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</p>
            {% endif %}
            </p>

                        <form class="spf-product__form" action="/cart/add" method="post">
              <select name="id" class="spf-product__variants">
                {% for variant in product.variants %}
                <option data-option1="{{variant.option1 | escape}}" data-option2="{{variant.option2 | escape}}" data-option3="{{variant.option3 | escape}}" data-price="{{variant.price}}" data-compare_at_price="{{variant.compare_at_price}}" data-available="{{variant.available}}" data-image="{% if variant.image.src %}{{variant.image.src | img_url: image_size }}{% endif %}" {% if variant.id == selected_or_first_available_variant.id %} selected="selected" {% endif %} value="{{ variant.id }}">{{ variant.title }}</option>
                {% endfor %}
              </select>
                                        </form>
              {% endcomment %}

              <!-- Paintbucket custom add to cart -->
                {% assign allow_ajax_add = true %}
                {% assign product_add_to_cart_text = 'Add to Bag' %}
                {% assign product_sold_out_text = 'Sold Out' %}
                {%- if product.title contains "Gift a Subscription" -%}
                  {% assign allow_ajax_add = false %}
                {%- endif -%}

                {% if product.variants.size == 1 and allow_ajax_add %}
                  <form class="addtocart quick-addtocart" action="/cart/add" method="post" enctype="multipart/form-data" data-productid="{{product.id}}" style="margin-top: 20px;">
                    
                    <select name="id" class="no-js" data-product-select data-productid="{{product.id}}">
                      {% for variant in product.variants %}
                        <option
                          {% if variant == selected_or_first_available_variant %}selected="selected"{% endif %}
                          {% unless variant.available %}disabled="disabled"{% endunless %}
                          value="{{ variant.id }}">
                            {{ variant.title }}
                        </option>
                      {% endfor %}
                    </select>

                    <button
                      type="submit"
                      name="add"
                      id="add-to-cart"
                      class="btn btn-large btn-outline ajax-cart--add-to-cart"
                      data-add-to-cart
                      {% if product.handle contains 'rise-ai' %}style="display:none;"{% endif %}
                      {% unless selected_or_first_available_variant.available %}disabled="disabled"{% endunless %}>
                        <span data-add-to-cart-text>
                          {% if selected_or_first_available_variant.available %}
                            {{ product_add_to_cart_text }}
                          {% else %}
                            {{ product_sold_out_text }}
                          {% endif %}
                        </span>
                    </button>
                  </form>
                {% endif %}
              <!-- End Paintbucket custom add to cart -->
          </div>
        </div>
      </div>
      {% endraw %}
